Roadmap de Implementaci√≥n: Sistema de Aprobaciones con PowerApps, SharePoint y Teams
Resumen Ejecutivo
Este documento detalla el plan de implementaci√≥n para un sistema de aprobaciones que reemplazar√° los actuales formularios de Microsoft Forms. La soluci√≥n se basar√° en PowerApps para la captura de datos, SharePoint para el almacenamiento y gesti√≥n de la informaci√≥n, y Teams para las notificaciones y proceso de aprobaci√≥n. El sistema ha sido dise√±ado para soportar entre 100-150 solicitudes diarias y permitir a 9 analistas de Cr√©ditos y Cobranza gestionar las aprobaciones de 23 usuarios de cajas en sucursales.
1. Estructura de SharePoint
1.1 Lista Principal: "Solicitudes_Maestro"
Esta lista centralizada registrar√° todas las solicitudes y su estado de aprobaci√≥n.
Campo	Tipo	Descripci√≥n	Indexado
ID	Autonum√©rico	Identificador √∫nico (generado por SharePoint)	S√≠
TipoSolicitud	Opci√≥n	Categor√≠a de la solicitud (ver tipos abajo)	S√≠
Solicitante	Usuario	Usuario que realiza la solicitud	S√≠
FechaSolicitud	Fecha/Hora	Momento de creaci√≥n (con hora y minutos, autom√°tico)	S√≠
Sucursal	Opci√≥n	Sucursal desde donde se genera la solicitud	S√≠
Estado	Opci√≥n	Pendiente/Aprobado/Rechazado	S√≠
Aprobador	Usuario	Analista que procesa la solicitud	No
FechaRespuesta	Fecha/Hora	Momento de la aprobaci√≥n/rechazo (con hora y minutos)	No
TiempoRespuesta	Calculado	Minutos entre solicitud y respuesta	No
TiempoRespuestaSLA	Indicador	Verde/Amarillo/Rojo seg√∫n cumplimiento de SLA	No
ComentariosRespuesta	Texto m√∫ltiple	Justificaci√≥n del aprobador	No
IDListaDetalle	Texto	ID del registro en la lista de detalle correspondiente	S√≠
Monto	Moneda	Valor monetario de la solicitud (cuando aplique)	No
ConversacionTeams	URL	Enlace al mensaje de Teams	No
Tipos de solicitud:
‚Ä¢	Liberaci√≥n Nota de Venta (SolicitudAtenci√≥nSucursales)
‚Ä¢	Solicitud Flota (SolicitudesFlota)
‚Ä¢	Confirmaci√≥n Transferencia (SolicitudConfirmaci√≥nTransfencias)
‚Ä¢	Devoluci√≥n/Anulaci√≥n TC (SolicitudDevolucionAnulacionTC)
‚Ä¢	Excepci√≥n Cheques (SolicitudExcepcionCheques)
‚Ä¢	Registro Cobranza (RegistroCobranzaAsistentes)
‚Ä¢	KPI Cajeras (FormularioKPICajeras)
1.2 Listas Detalle
Se crear√°n listas espec√≠ficas para cada tipo de formulario, relacionadas con la lista principal a trav√©s del campo IDListaDetalle:
1.2.1 Lista "Liberacion_Nota_Venta"
Campo	Tipo	Descripci√≥n
ID	Autonum√©rico	Identificador √∫nico
IDSolicitudMaestro	Lookup	Relaci√≥n con Solicitudes_Maestro
BP_Cliente	N√∫mero	C√≥digo de cliente en sistema
NotaVenta	Texto	N√∫mero de nota de venta
FechaLiberacion	Fecha	Fecha solicitada para liberaci√≥n
Comentarios	Texto m√∫ltiple	Justificaci√≥n de la solicitud
NombreCliente	Texto	Nombre del cliente
MedioPagoFrecuente	Texto	M√©todo habitual de pago del cliente
FechaCompromisoPago	Fecha	Para liberaciones con facturas vencidas
TipoSolicitudDetalle	Opci√≥n	Subtipo dentro de esta categor√≠a
1.2.2 Lista "Solicitudes_Flota"
Campo	Tipo	Descripci√≥n
ID	Autonum√©rico	Identificador √∫nico
IDSolicitudMaestro	Lookup	Relaci√≥n con Solicitudes_Maestro
RUTCliente	Texto	RUT del cliente (formato validado)
MontoServicio	Moneda	Valor del servicio solicitado
DatosContactoPago	Texto m√∫ltiple	Informaci√≥n de contacto para pagos
TipoBloqueo	Opci√≥n	Facturas vencidas/Dicom/L√≠mite cr√©dito/Otras
FechaCompromisoPago	Fecha	Para liberaciones con facturas vencidas
InformacionAdicional	Texto m√∫ltiple	Datos complementarios
1.2.3 Lista "Confirmacion_Transferencias"
Campo	Tipo	Descripci√≥n
ID	Autonum√©rico	Identificador √∫nico
IDSolicitudMaestro	Lookup	Relaci√≥n con Solicitudes_Maestro
BP_Cliente	N√∫mero	C√≥digo de cliente en sistema
RUTCliente	Texto	RUT del cliente (formato validado)
TipoConfirmacion	Opci√≥n	Transferencia/Dep√≥sito/Webpay
FechaOperacion	Fecha	Fecha de la transferencia/dep√≥sito/webpay
RUTGirador	Texto	RUT o nombre del girador
Monto	Moneda	Valor de la transferencia
Comprobante	URL	Enlace al documento subido
Observaciones	Texto m√∫ltiple	Informaci√≥n adicional
1.2.4 Lista "Devolucion_Anulacion_TC"
Campo	Tipo	Descripci√≥n
ID	Autonum√©rico	Identificador √∫nico
IDSolicitudMaestro	Lookup	Relaci√≥n con Solicitudes_Maestro
BP_Cliente	N√∫mero	C√≥digo de cliente en sistema
RUTCliente	Texto	RUT del cliente
TipoSolicitud	Opci√≥n	Devoluci√≥n cliente/Gen√©rico/Tercero/Anulaci√≥n TC
BoletaCliente	URL	Enlace al documento subido
TipoSaldoFavor	Opci√≥n	Nota cr√©dito/Anticipo
NumBoletaFactura	Texto	N√∫mero de documento relacionado
FechaEmisionDocumento	Fecha	Fecha de emisi√≥n del documento
NumNotaCredito	Texto	N√∫mero de nota de cr√©dito
FechaNotaCredito	Fecha	Fecha de la nota de cr√©dito
MontoDevolucion	Moneda	Valor a devolver
MotivoNotaCredito	Opci√≥n	Producto no sirve/Garant√≠a/Otras
DatosBancarios	Texto m√∫ltiple	Datos para transferencia
DatosAnulacionTC	Texto m√∫ltiple	Datos espec√≠ficos para TC
1.2.5 Lista "Excepcion_Cheques"
Campo	Tipo	Descripci√≥n
ID	Autonum√©rico	Identificador √∫nico
IDSolicitudMaestro	Lookup	Relaci√≥n con Solicitudes_Maestro
BP_Cliente	N√∫mero	C√≥digo de cliente en sistema
RUTGirador	Texto	RUT del girador del cheque
RUTCliente	Texto	RUT del cliente
CondicionPago	Opci√≥n	Contado/L√≠nea de cr√©dito
TipoPago	Opci√≥n	Venta/Pago de facturas
FolioFactura	Texto	N√∫mero de factura relacionada
NotaVenta	Texto	N√∫mero de nota de venta
MontoVenta	Moneda	Valor de la operaci√≥n
MotivoRechazoORSAN	Texto	Causa del rechazo en sistema
FechasVencimiento	Texto	Fechas de vencimiento de cheques
NumerosCheques	Texto m√∫ltiple	Lista de n√∫meros de cheque
Observaciones	Texto m√∫ltiple	Informaci√≥n adicional
1.2.6 Lista "Registro_Cobranza"
Campo	Tipo	Descripci√≥n
ID	Autonum√©rico	Identificador √∫nico
IDSolicitudMaestro	Lookup	Relaci√≥n con Solicitudes_Maestro
AsistenteCobranza	Opci√≥n	Nombre del asistente
BP_Cliente	N√∫mero	C√≥digo de cliente en sistema
RUTCliente	Texto	RUT del cliente (opcional)
RazonSocial	Texto	Nombre de la empresa
TipoGestion	Opci√≥n	Correo/Llamada/Liberaci√≥n NV/Protesto/Otras
FechaCompromisoPago	Fecha	Fecha acordada para pago
Observaciones	Texto m√∫ltiple	Detalles de la gesti√≥n
FechaSeguimiento	Fecha	Pr√≥xima fecha de seguimiento
MotivoSeguimiento	Texto	Raz√≥n del seguimiento
EstadoPago	Booleano	Pagado/No pagado
1.2.7 Lista "KPI_Cajeras"
Campo	Tipo	Descripci√≥n
ID	Autonum√©rico	Identificador √∫nico
IDSolicitudMaestro	Lookup	Relaci√≥n con Solicitudes_Maestro
Opcion	Opci√≥n	Cheque enmendado/Eliminaci√≥n de pago por error
BP_Cliente	N√∫mero	C√≥digo de cliente en sistema
FechaCierreCaja	Fecha	Fecha de cierre de caja
NroCheque	Texto	N√∫mero del cheque (si aplica)
Monto	Moneda	Valor monetario
MotivoError	Texto m√∫ltiple	Explicaci√≥n del error
ImagenCheque	URL	Enlace al documento subido
1.3 Lista "Configuracion_Aprobadores"
Esta lista define qui√©n puede aprobar qu√© tipos de solicitudes y en qu√© condiciones.
Campo	Tipo	Descripci√≥n
ID	Autonum√©rico	Identificador √∫nico
TipoSolicitud	Opci√≥n	Categor√≠a de solicitud
GrupoAprobadores	Usuarios m√∫ltiples	Lista de aprobadores autorizados
CanalTeams	Texto	ID del canal de Teams para notificaciones
UmbralMontoAlto	Moneda	Monto que requiere aprobaci√≥n especial
AprobadoresMontoAlto	Usuarios m√∫ltiples	Aprobadores para montos elevados
MinutosMaximoRespuesta	N√∫mero	SLA para respuesta (minutos)
UmbralAlerta	N√∫mero	% del SLA para generar alerta (ej: 80%)
1.4 Lista "Biblioteca_Documentos"
Biblioteca centralizada para todos los archivos adjuntos.
Campo	Tipo	Descripci√≥n
T√≠tulo	Texto	Nombre del documento
IDSolicitudMaestro	Lookup	Relaci√≥n con Solicitudes_Maestro
TipoDocumento	Opci√≥n	Comprobante/Boleta/Cheque/Formulario/Otro
FechaSubida	Fecha/Hora	Momento de la carga (autom√°tico)
UsuarioSubida	Usuario	Quien carg√≥ el documento
2. Flujo de Power Automate Centralizado
Se implementar√° un √∫nico flujo de Power Automate que atender√° todo el proceso de aprobaci√≥n:
2.1 Desencadenador
‚Ä¢	Se activar√° cuando se cree un nuevo elemento en la lista "Solicitudes_Maestro"
2.2 Acciones del Flujo
1.	Identificaci√≥n y Clasificaci√≥n
o	Obtener detalles de la solicitud principal
o	Recuperar informaci√≥n de la lista de detalle correspondiente
o	Determinar grupo de aprobadores seg√∫n configuraci√≥n
2.	Notificaci√≥n a Aprobadores
o	Crear tarjeta adaptativa personalizada seg√∫n tipo de solicitud
o	Enviar notificaci√≥n al canal de Teams correspondiente
o	Registrar URL de la conversaci√≥n en la lista principal
3.	Procesamiento de Respuesta
o	Escuchar acci√≥n de aprobador (mediante webhook) en tiempo real
o	Capturar comentarios y decisi√≥n
o	Actualizar estado en SharePoint inmediatamente
o	Calcular tiempo de respuesta en minutos
o	Registrar nivel de cumplimiento de SLA (dentro/fuera de tiempo)
4.	Notificaci√≥n al Solicitante
o	Enviar mensaje a trav√©s de Teams
o	Incluir enlace a registro en SharePoint para seguimiento
5.	Actualizaci√≥n de M√©tricas
o	Registrar estad√≠sticas para reportes de SLA
o	Actualizar dashboard si corresponde
2.3 Manejo de Excepciones y SLAs
‚Ä¢	Recordatorios autom√°ticos al alcanzar el umbral de alerta (t√≠picamente 15-20 minutos)
‚Ä¢	Notificaci√≥n con mayor prioridad a todos los aprobadores al 90% del tiempo SLA
‚Ä¢	Escalamiento autom√°tico a supervisores una vez superado el SLA configurado
‚Ä¢	Indicadores visuales en Teams (amarillo=cerca del l√≠mite, rojo=excedido)
‚Ä¢	Dashboard en tiempo real de solicitudes pendientes con indicadores de tiempo
‚Ä¢	Registro de errores para soporte t√©cnico

Fase 2: Desarrollo Simplificado de PowerApps - Plan Enfocado
1. Enfoque Simplificado
Para reducir el tiempo de desarrollo, nos centraremos exclusivamente en la creaci√≥n de formularios funcionales que se integren correctamente con SharePoint. Esta versi√≥n simplificada permitir√° implementar r√°pidamente la soluci√≥n core mientras deja espacio para futuras mejoras.
1.1 Alcance Reducido
Componentes incluidos:
‚Ä¢	Pantalla de inicio b√°sica
‚Ä¢	Formularios para cada tipo de solicitud
‚Ä¢	Integraci√≥n b√°sica con SharePoint
Componentes excluidos (para fases futuras):
‚Ä¢	Portal de aprobadores (se gestionar√° directamente en Teams)
‚Ä¢	Panel de administraci√≥n y configuraci√≥n
‚Ä¢	Reportes y dashboards avanzados
‚Ä¢	Funcionalidades avanzadas (offline, chatbot, etc.)
1.2 Tecnolog√≠a y Enfoque
‚Ä¢	Tipo de App: Canvas App simplificada
‚Ä¢	Formato: Optimizada principalmente para escritorio
‚Ä¢	Tema: B√°sico con m√≠nima personalizaci√≥n
‚Ä¢	Desarrollo: Enfoque modular para facilitar expansi√≥n futura
2. Dise√±o Simplificado de Interfaz
2.1 Pantalla de Inicio
 
Caracter√≠sticas incluidas:
‚Ä¢	Lista simple de tipos de formulario accesibles seg√∫n perfil
‚Ä¢	Vista b√°sica de "Mis solicitudes recientes" (√∫ltimas 5)
‚Ä¢	Indicador simple de estado (pendiente/aprobado/rechazado)
Navegaci√≥n simplificada:
‚Ä¢	Men√∫ de lista sencillo para acceder a los formularios
‚Ä¢	Bot√≥n para ver historial b√°sico de solicitudes
‚Ä¢	Bot√≥n de ayuda con instrucciones b√°sicas
3. Formularios de Solicitud (Enfoque Central)
Se mantendr√°n todos los formularios planeados, optimizados para captura precisa de datos:
3.1 Principios de Dise√±o para Todos los Formularios
‚Ä¢	Validaci√≥n esencial: Solo reglas cr√≠ticas de negocio
‚Ä¢	Campos obligatorios: Claramente marcados
‚Ä¢	Estructura lineal: Secuencia l√≥gica sin ramificaciones complejas
‚Ä¢	Mensajes de error: Claros y espec√≠ficos
‚Ä¢	Confirmaci√≥n de env√≠o: Mensaje simple con resumen de la solicitud
3.2 Formulario: Liberaci√≥n Nota de Venta
Caracter√≠sticas mantenidas:
‚Ä¢	Validaci√≥n b√°sica del n√∫mero de nota de venta
‚Ä¢	Selector de sucursal
‚Ä¢	Campo de monto con formato de moneda
‚Ä¢	Secci√≥n de comentarios simple
Optimizaciones:
‚Ä¢	Formato simplificado en una sola pantalla
‚Ä¢	Validaciones esenciales √∫nicamente
‚Ä¢	Campos organizados en grupos l√≥gicos
3.3 Formulario: Solicitudes Flota
Caracter√≠sticas mantenidas:
‚Ä¢	Validaci√≥n b√°sica de RUT
‚Ä¢	Selector tipo de bloqueo
‚Ä¢	Campos esenciales para cada tipo
Optimizaciones:
‚Ä¢	Formulario lineal sin l√≥gica condicional compleja
‚Ä¢	Validaciones en tiempo real solo para campos cr√≠ticos
3.4 Formulario: Confirmaci√≥n Transferencias
Caracter√≠sticas mantenidas:
‚Ä¢	Carga de comprobante (funcionalidad b√°sica)
‚Ä¢	Campos seg√∫n tipo de confirmaci√≥n
Optimizaciones:
‚Ä¢	Simplificaci√≥n de la carga de archivos
‚Ä¢	Validaciones m√≠nimas pero suficientes
3.5 Formulario: Devoluci√≥n/Anulaci√≥n TC
Caracter√≠sticas mantenidas:
‚Ä¢	Campos necesarios seg√∫n tipo de solicitud
‚Ä¢	Carga de documentos esenciales
Optimizaciones:
‚Ä¢	Agrupaci√≥n visual de campos relacionados
‚Ä¢	Simplificaci√≥n de opciones condicionales
3.6 Formulario: Excepci√≥n Cheques
Caracter√≠sticas mantenidas:
‚Ä¢	Campos para informaci√≥n de cheques
‚Ä¢	Validaciones b√°sicas de formato
Optimizaciones:
‚Ä¢	L√≠mite de 5 cheques por solicitud
‚Ä¢	Simplificaci√≥n de la l√≥gica de validaci√≥n
3.7 Formulario: Registro Cobranza
Caracter√≠sticas mantenidas:
‚Ä¢	Selector de asistente
‚Ä¢	Campos para registro b√°sico
Optimizaciones:
‚Ä¢	Interfaz simplificada en una pantalla
‚Ä¢	Enfoque en captura r√°pida de informaci√≥n
3.8 Formulario: KPI Cajeras
Caracter√≠sticas mantenidas:
‚Ä¢	Selector de opci√≥n principal
‚Ä¢	Campos espec√≠ficos seg√∫n opci√≥n elegida
Optimizaciones:
‚Ä¢	Simplificaci√≥n de la carga de im√°genes
‚Ä¢	Reducci√≥n de campos opcionales
4. Integraci√≥n con SharePoint
4.1 Funcionalidad B√°sica de Conexi√≥n
‚Ä¢	Configuraci√≥n de conexi√≥n con listas de SharePoint
‚Ä¢	Almacenamiento de datos en listas apropiadas
‚Ä¢	Manejo simple de archivos adjuntos
‚Ä¢	Confirmaci√≥n al usuario de env√≠o exitoso
4.2 Optimizaciones de Integraci√≥n
‚Ä¢	Validaci√≥n previa al env√≠o para reducir errores
‚Ä¢	Manejo b√°sico de errores de conexi√≥n
‚Ä¢	Reintento autom√°tico de env√≠o en caso de fallo temporal
5. Plan de Implementaci√≥n Acelerado
5.1 Cronograma Reducido
Semana	Actividad	Entregables
1	Configuraci√≥n y plantilla base	App con navegaci√≥n y estructura b√°sica
2	Formularios grupo 1 (4 formularios)	Liberaci√≥n NV, Flota, Confirmaci√≥n y Devoluci√≥n
3	Formularios grupo 2 (3 formularios)	Excepci√≥n Cheques, Registro Cobranza y KPI
4	Integraci√≥n, pruebas y ajustes	App funcional con todos los formularios
5.2 Metodolog√≠a Optimizada
‚Ä¢	Prototipado r√°pido: Versi√≥n funcional desde la primera semana
‚Ä¢	Iteraciones cortas: Revisiones diarias de progreso
‚Ä¢	Pruebas inmediatas: Validaci√≥n de cada formulario al completarse
‚Ä¢	Documentaci√≥n esencial: Solo gu√≠as de usuario b√°sicas
6. Documentaci√≥n y Soporte B√°sico
6.1 Documentaci√≥n Simplificada
‚Ä¢	Manual de usuario simplificado (PDF)
‚Ä¢	Instrucciones paso a paso para cada formulario
‚Ä¢	Preguntas frecuentes (FAQ)
6.2 Entrenamiento Acelerado
‚Ä¢	Una sesi√≥n √∫nica de capacitaci√≥n general (2 horas)
‚Ä¢	Videos cortos de instrucci√≥n por formulario (5-8 minutos)
‚Ä¢	Gu√≠a de referencia r√°pida imprimible
7. Consideraciones para Futuras Expansiones
Se dise√±ar√° la app de manera que permita futuras expansiones:
‚Ä¢	Estructura modular que facilite agregar componentes
‚Ä¢	Nomenclatura consistente para facilitar mantenimiento
‚Ä¢	Comentarios en el c√≥digo para documentar decisiones clave
‚Ä¢	Separaci√≥n clara entre UI y l√≥gica de negocio
7.1 Prioridades para Expansi√≥n Futura
1.	Vista para aprobadores
2.	Dashboard de m√©tricas
3.	Configuraci√≥n del sistema
4.	Funcionalidades avanzadas
8. Ventajas del Enfoque Simplificado
‚Ä¢	Tiempo de desarrollo reducido: De 6 a 4 semanas
‚Ä¢	Enfoque en valor esencial: Formularios como componente cr√≠tico
‚Ä¢	Reducci√≥n de complejidad: Menor riesgo de errores
‚Ä¢	Adopci√≥n m√°s r√°pida: Curva de aprendizaje reducida para usuarios
‚Ä¢	Feedback temprano: Permite ajustes antes de invertir en componentes avanzados
Fase 3: Implementaci√≥n de Power Automate y Teams - Plan Detallado
1. Estructura del Flujo Centralizado
El sistema utilizar√° un √∫nico flujo de Power Automate que gestionar√° todo el proceso de aprobaciones, desde la creaci√≥n de una nueva solicitud hasta la notificaci√≥n de respuesta al solicitante.
1.1 Arquitectura del Flujo
 
1.2 Desencadenador
‚Ä¢	Evento: Creaci√≥n de un nuevo elemento en la lista "Solicitudes_Maestro" de SharePoint
‚Ä¢	Frecuencia de comprobaci√≥n: Inmediata (tiempo real)
‚Ä¢	Datos iniciales: ID de solicitud, tipo, sucursal, solicitante, fecha/hora
1.3 Estructura Principal
El flujo seguir√° esta secuencia l√≥gica:
1.	Recepci√≥n y clasificaci√≥n de solicitud
2.	Enriquecimiento de datos
3.	Notificaci√≥n a aprobadores
4.	Procesamiento de respuesta
5.	Actualizaci√≥n de registro
6.	Notificaci√≥n al solicitante
7.	Manejo de SLAs
2. Detalle de Componentes del Flujo
2.1 Recepci√≥n y Clasificaci√≥n
Cuando se crea un elemento en "Solicitudes_Maestro"
‚Üì
Obtener propiedades del elemento
‚Üì
Condici√≥n: Verificar "TipoSolicitud"
‚Üì
Ramificaci√≥n seg√∫n tipo para procesamiento espec√≠fico
Acciones de Power Automate:
‚Ä¢	Trigger: "When an item is created"
‚Ä¢	Action: "Get item" (para obtener todos los detalles)
‚Ä¢	Action: "Condition" con ramificaciones por tipo
2.2 Enriquecimiento de Datos
Obtener datos adicionales de lista espec√≠fica seg√∫n tipo
‚Üì
Obtener datos de aprobadores asignados
‚Üì
Construir conjunto de datos completo para la tarjeta adaptativa
Acciones de Power Automate:
‚Ä¢	Action: "Get item" de lista espec√≠fica (usando IDListaDetalle)
‚Ä¢	Action: "Get items" de lista "Configuracion_Aprobadores"
‚Ä¢	Action: "Compose" para estructurar datos completos
2.3 Notificaci√≥n a Aprobadores
Determinar canal de Teams seg√∫n configuraci√≥n
‚Üì
Generar tarjeta adaptativa espec√≠fica para el tipo de solicitud
‚Üì
Publicar tarjeta en canal correspondiente
‚Üì
Registrar URL del mensaje en SharePoint
Acciones de Power Automate:
‚Ä¢	Action: "Post adaptive card in a chat or channel" a Teams
‚Ä¢	Action: "Update item" para guardar URL de conversaci√≥n
3. Dise√±o de Tarjetas Adaptativas
Cada tipo de solicitud tendr√° una tarjeta adaptativa optimizada, pero con estructura consistente.
3.1 Estructura General de Tarjetas
{
  "type": "AdaptiveCard",
  "body": [
    {
      "type": "TextBlock",
      "size": "Medium",
      "weight": "Bolder",
      "text": "${solicitudTitulo}"
    },
    {
      "type": "ColumnSet",
      "columns": [
        {
          "type": "Column",
          "items": [
            {
              "type": "TextBlock",
              "weight": "Bolder",
              "text": "Solicitante:"
            },
            {
              "type": "TextBlock",
              "text": "${solicitante}",
              "wrap": true
            }
          ],
          "width": "stretch"
        },
        {
          "type": "Column",
          "items": [
            {
              "type": "TextBlock",
              "weight": "Bolder",
              "text": "Tiempo Transcurrido:"
            },
            {
              "type": "TextBlock",
              "text": "${tiempoTranscurrido} min",
              "color": "${if(tiempoTranscurrido > tiempoAlerta, 'attention', 'good')}",
              "wrap": true
            }
          ],
          "width": "stretch"
        }
      ]
    },
    {
      "type": "FactSet",
      "facts": ${camposEspecificos}
    },
    {
      "type": "TextBlock",
      "weight": "Bolder",
      "text": "Comentarios:"
    },
    {
      "type": "TextBlock",
      "text": "${comentarios}",
      "wrap": true
    },
    {
      "type": "Input.Text",
      "id": "comentariosRespuesta",
      "placeholder": "Ingrese comentarios (opcional)",
      "isMultiline": true
    }
  ],
  "actions": [
    {
      "type": "Action.Submit",
      "title": "Aprobar",
      "data": {
        "accion": "aprobar",
        "idSolicitud": "${idSolicitud}"
      },
      "style": "positive"
    },
    {
      "type": "Action.Submit",
      "title": "Rechazar",
      "data": {
        "accion": "rechazar",
        "idSolicitud": "${idSolicitud}"
      },
      "style": "destructive"
    }
  ],
  "$schema": "http://adaptivecards.io/schemas/adaptive-card.json",
  "version": "1.5"
}
3.2 Variaciones por Tipo de Solicitud
Cada tipo de solicitud mostrar√° campos espec√≠ficos relevantes:
Ejemplo: Liberaci√≥n Nota de Venta
- Sucursal
- Nota de Venta
- Cliente
- Monto
- Fecha de Liberaci√≥n
Ejemplo: Excepci√≥n Cheques
- Sucursal
- RUT Cliente
- RUT Girador
- N√∫meros de Cheque
- Motivo Rechazo ORSAN
3.3 Indicadores Visuales
‚Ä¢	C√≥digo de colores:
o	Verde: Dentro del SLA
o	Amarillo: Acerc√°ndose al l√≠mite (80% del SLA)
o	Rojo: Excedido el SLA
‚Ä¢	Etiquetas de prioridad:
o	Normal: Solicitudes regulares
o	Alta: Solicitudes que requieren atenci√≥n inmediata
o	Urgente: Para solicitudes que han excedido el SLA
4. Procesamiento de Respuestas
4.1 Captura de Respuesta
Cuando se recibe respuesta a tarjeta adaptativa
‚Üì
Extraer ID de solicitud y decisi√≥n (aprobar/rechazar)
‚Üì
Registrar comentarios adicionales
‚Üì
Calcular tiempo total de respuesta (en minutos)
Acciones de Power Automate:
‚Ä¢	Trigger: "When a Teams message contains an adaptive card response"
‚Ä¢	Action: "Compose" para extraer y formatear datos de respuesta
‚Ä¢	Action: "Convert time zone" para c√°lculos precisos de tiempo
4.2 Actualizaci√≥n de SharePoint
Actualizar registro en lista principal:
‚Üì
- Estado = Aprobado/Rechazado
- Aprobador = Usuario que respondi√≥
- FechaRespuesta = Fecha/hora actual
- TiempoRespuesta = Minutos transcurridos
- ComentariosRespuesta = Texto ingresado
‚Üì
Actualizar indicador de SLA seg√∫n tiempo transcurrido
Acciones de Power Automate:
‚Ä¢	Action: "Update item" en "Solicitudes_Maestro"
‚Ä¢	Action: "Condition" para determinar cumplimiento de SLA
5. Notificaci√≥n al Solicitante
5.1 Dise√±o de Notificaci√≥n
Se enviar√° una notificaci√≥n por Teams al solicitante con:
Solicitud #[ID]: [APROBADA/RECHAZADA]
‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
Tipo: [Tipo de Solicitud]
Fecha de solicitud: [Fecha]
Tiempo de respuesta: [X] minutos
Aprobador: [Nombre]

Comentarios: [Texto de respuesta]

[Enlace para ver detalles]
Acciones de Power Automate:
‚Ä¢	Action: "Post message in a chat or channel" a Teams
‚Ä¢	Action: "Send an email" como respaldo (opcional)
5.2 Variaciones de Notificaci√≥n
‚Ä¢	Aprobada: Fondo verde, texto positivo
‚Ä¢	Rechazada: Fondo gris, explicaci√≥n del rechazo
‚Ä¢	Informaci√≥n adicional: Cuando el aprobador solicita m√°s datos
6. Sistema de SLAs y Alertas
6.1 Temporizador de Verificaci√≥n
Crear un trabajo programado al recibir nueva solicitud
‚Üì
Verificar estado cada 5 minutos
‚Üì
Si contin√∫a pendiente, calcular tiempo transcurrido
‚Üì
Aplicar reglas de escalamiento seg√∫n umbrales
Acciones de Power Automate:
‚Ä¢	Action: "Create a timed job" al inicio del flujo
‚Ä¢	Flow secundario: "Do until" con verificaci√≥n peri√≥dica
6.2 Niveles de Alerta
Nivel 1 (70% del SLA)
‚Ä¢	Cambio de color en tarjeta a amarillo
‚Ä¢	Sin notificaci√≥n adicional
Nivel 2 (90% del SLA)
‚Ä¢	Cambio de color en tarjeta a rojo
‚Ä¢	Mensaje adicional en canal con menci√≥n a todos los aprobadores
‚Ä¢	Texto: "‚ö†Ô∏è Solicitud #123 est√° por exceder tiempo m√°ximo de respuesta"
Nivel 3 (100%+ del SLA)
‚Ä¢	Notificaci√≥n a supervisor
‚Ä¢	Texto: "üö® Solicitud #123 ha excedido tiempo m√°ximo de respuesta"
‚Ä¢	Aplicaci√≥n autom√°tica de regla por defecto (opcional para fase posterior)
7. Canales de Teams
7.1 Estructura de Canales
Para una gesti√≥n eficiente, se usar√° esta estructura en Teams:
‚Ä¢	Canal General: Anuncios y comunicaci√≥n global
‚Ä¢	Canal Aprobaciones-NV: Liberaciones de notas de venta
‚Ä¢	Canal Aprobaciones-Pagos: Confirmaciones y transferencias
‚Ä¢	Canal Aprobaciones-Excepciones: Cheques y casos especiales
‚Ä¢	Canal Aprobaciones-Otros: Resto de solicitudes
‚Ä¢	Canal SLA-Alertas: Notificaciones de casos cr√≠ticos (opcional)
7.2 Configuraci√≥n de Notificaciones
‚Ä¢	Notificaciones persistentes para mensajes nuevos
‚Ä¢	Sonido de alerta para solicitudes nuevas
‚Ä¢	Badge counter activado para canal de aprobaciones
8. Plan de Implementaci√≥n
8.1 Cronograma de Desarrollo
D√≠a	Actividad	Detalle
1-2	Dise√±o de tarjetas adaptativas	Plantillas para cada tipo de solicitud
3-5	Desarrollo de flujo principal	Estructura b√°sica y l√≥gica core
6-7	Implementaci√≥n de notificaciones	Sistema de alertas y respuestas
8-9	Pruebas de integraci√≥n	Verificaci√≥n end-to-end
10	Ajustes finales	Optimizaci√≥n y documentaci√≥n
8.2 Requisitos de Implementaci√≥n
‚Ä¢	Licencias Power Automate por usuario o Plan Premium
‚Ä¢	Permisos de Teams para creaci√≥n de canales
‚Ä¢	Acceso como administrador a SharePoint
‚Ä¢	Cuenta de servicio para flujos automatizados (recomendado)
8.3 Pruebas Cr√≠ticas
‚Ä¢	Prueba de carga: simulaci√≥n de 20+ solicitudes simult√°neas
‚Ä¢	Prueba de tiempos: verificaci√≥n de c√°lculos de SLA
‚Ä¢	Prueba de concurrencia: m√∫ltiples aprobadores respondiendo
‚Ä¢	Prueba de recuperaci√≥n: comportamiento ante fallos de conexi√≥n
9. Consideraciones de Escalabilidad
9.1 Optimizaciones para Alto Volumen
‚Ä¢	Uso de variables de entorno para configuraci√≥n
‚Ä¢	Agrupaci√≥n de notificaciones en per√≠odos de alta demanda
‚Ä¢	Limitaci√≥n de mensajes duplicados
‚Ä¢	Cancelaci√≥n autom√°tica de trabajos temporales completados
9.2 Monitoreo de Rendimiento
‚Ä¢	Registro de tiempos de ejecuci√≥n del flujo
‚Ä¢	Alertas autom√°ticas si el flujo excede tiempos esperados
‚Ä¢	Plan de respaldo manual en caso de indisponibilidad
10. Documentaci√≥n y Soporte
10.1 Gu√≠as para Aprobadores
‚Ä¢	Instrucciones para responder tarjetas adaptativas
‚Ä¢	Interpretaci√≥n de c√≥digos de colores y prioridades
‚Ä¢	Protocolos para solicitudes de informaci√≥n adicional
10.2 Mantenimiento
‚Ä¢	Procedimiento para modificar textos de notificaciones
‚Ä¢	Ajuste de tiempos de SLA por tipo de solicitud
‚Ä¢	Cambios en la asignaci√≥n de canales

Implementaci√≥n y Configuraci√≥n de Microsoft Teams para el Sistema de Aprobaciones
1. Configuraci√≥n de la Estructura en Teams
1.1 Creaci√≥n del Equipo Dedicado
Se crear√° un equipo espec√≠fico en Microsoft Teams llamado "Aprobaciones CyC" con la siguiente estructura:
Equipo: Aprobaciones CyC
‚îú‚îÄ‚îÄ Canal: General
‚îú‚îÄ‚îÄ Canal: Liberaciones-NV
‚îú‚îÄ‚îÄ Canal: Excepciones-Cheques
‚îú‚îÄ‚îÄ Canal: Transferencias
‚îú‚îÄ‚îÄ Canal: Devoluciones-TC
‚îî‚îÄ‚îÄ Canal: Otros
Pasos de implementaci√≥n:
1.	Acceder a Teams como administrador
2.	Seleccionar "Crear un equipo" > "Desde cero" > "Privado"
3.	Nombrar el equipo como "Aprobaciones CyC"
4.	Agregar descripci√≥n: "Sistema centralizado de aprobaciones entre Cajas y Cr√©ditos y Cobranza"
5.	Crear los canales espec√≠ficos seg√∫n la estructura
1.2 Configuraci√≥n de Permisos
Rol	Miembros	Permisos
Propietarios	Supervisor CyC, Administrador Sistema	Control total del equipo y canales
Miembros	Analistas CyC (9)	Acceso a todos los canales, permisos para aprobar/rechazar
Invitados limitados	Cajeras/Solicitantes (23)	Solo reciben notificaciones, sin acceso a canales de aprobaci√≥n
Pasos de implementaci√≥n:
1.	En la configuraci√≥n del equipo, ir a "Administrar equipo"
2.	Agregar propietarios y miembros seg√∫n los roles definidos
3.	Configurar permisos espec√≠ficos para cada canal
4.	Habilitar notificaciones para usuarios externos al equipo
2. Dise√±o e Implementaci√≥n de Tarjetas Adaptativas
2.1 Dise√±o Base de Tarjetas
Todas las tarjetas adaptativas seguir√°n esta estructura b√°sica:
 
Elementos comunes:
‚Ä¢	Encabezado con tipo de solicitud e ID
‚Ä¢	Informaci√≥n del solicitante y sucursal
‚Ä¢	Indicador visual de tiempo transcurrido
‚Ä¢	Datos espec√≠ficos seg√∫n tipo de solicitud
‚Ä¢	Botones de acci√≥n (Aprobar/Rechazar)
‚Ä¢	Campo para comentarios
2.2 Implementaci√≥n T√©cnica
Para implementar las tarjetas adaptativas en Microsoft Teams:
{
  "type": "AdaptiveCard",
  "body": [
    {
      "type": "TextBlock",
      "size": "Large",
      "weight": "Bolder",
      "text": "${tipoSolicitud} - Solicitud #${idSolicitud}",
      "wrap": true,
      "style": "heading"
    },
    {
      "type": "ColumnSet",
      "columns": [
        {
          "type": "Column",
          "width": "auto",
          "items": [
            {
              "type": "Image",
              "url": "${urgenciaIconUrl}",
              "size": "Small",
              "altText": "Indicador de urgencia"
            }
          ]
        },
        {
          "type": "Column",
          "width": "stretch",
          "items": [
            {
              "type": "TextBlock",
              "text": "**Tiempo:** ${tiempoTranscurrido} min",
              "color": "${colorTiempo}",
              "wrap": true
            }
          ]
        }
      ]
    },
    {
      "type": "FactSet",
      "facts": [
        {
          "title": "Solicitante",
          "value": "${nombreSolicitante}"
        },
        {
          "title": "Sucursal",
          "value": "${sucursal}"
        },
        {
          "title": "Fecha",
          "value": "${fechaSolicitud}"
        }
      ]
    },
    {
      "type": "Container",
      "style": "emphasis",
      "items": ${camposEspecificos}
    },
    {
      "type": "TextBlock",
      "text": "**Comentarios:**",
      "wrap": true
    },
    {
      "type": "TextBlock",
      "text": "${comentarios}",
      "wrap": true
    },
    {
      "type": "Input.Text",
      "id": "comentariosAprobador",
      "placeholder": "Ingrese sus comentarios aqu√≠...",
      "isMultiline": true
    }
  ],
  "actions": [
    {
      "type": "Action.Submit",
      "title": "‚úÖ Aprobar",
      "data": {
        "action": "aprobar",
        "idSolicitud": "${idSolicitud}"
      },
      "style": "positive"
    },
    {
      "type": "Action.Submit",
      "title": "‚ùå Rechazar",
      "data": {
        "action": "rechazar",
        "idSolicitud": "${idSolicitud}"
      },
      "style": "destructive"
    }
  ],
  "$schema": "http://adaptivecards.io/schemas/adaptive-card.json",
  "version": "1.5"
}
Pasos de implementaci√≥n:
1.	Crear plantillas JSON para cada tipo de solicitud
2.	Implementar l√≥gica de variable en Power Automate para generar tarjetas din√°micas
3.	Configurar c√≥digos de color seg√∫n tiempo transcurrido
4.	Probar renderizado en diferentes dispositivos
3. Configuraci√≥n de Notificaciones
3.1 Configuraci√≥n de Alertas por Canal
Canal	Alertas	Prioridad
Liberaciones-NV	Banner + Sonido	Alta
Excepciones-Cheques	Banner + Sonido	Alta
Transferencias	Banner	Media
Devoluciones-TC	Banner	Media
Otros	Icono	Baja
Pasos de implementaci√≥n:
1.	Cada analista debe configurar sus preferencias de notificaci√≥n para cada canal
2.	Instrucciones para habilitar notificaciones de escritorio
3.	Configuraci√≥n de notificaciones m√≥viles para respuesta r√°pida
4.	Instrucciones para priorizaci√≥n de canales
3.2 Alertas de SLA en Teams
Para casos que se acercan al tiempo l√≠mite, se implementar√°n:
1.	Recordatorios en canal: Mensajes adicionales con menci√≥n a aprobadores
2.	Notificaciones prioritarias: Mensajes con distintivo "Urgente"
3.	Alertas de equipo: Para casos que excedan el SLA
Ejemplo de mensaje de alerta SLA:
@AprobadoresCyC ATENCI√ìN ‚ö†Ô∏è 
La solicitud #12345 (Liberaci√≥n NV) lleva 25 minutos sin respuesta.
Tiempo m√°ximo restante: 5 minutos.
[Ver solicitud](link)
4. Implementaci√≥n de Interacciones con Power Automate
4.1 Configuraci√≥n del Conector Teams en Power Automate
Acciones principales a configurar:
1.	Post adaptive card in a chat or channel
o	Target: Canal espec√≠fico seg√∫n tipo de solicitud
o	Card data: JSON din√°mico seg√∫n plantilla
o	Importance: Normal/High seg√∫n urgencia
2.	Wait for a response
o	Timeout setting: Configurado seg√∫n SLA (ej. 30 minutos)
o	Error handling: Notificaci√≥n alternativa si vence tiempo
3.	Post message as the Flow bot
o	Para notificaciones de seguimiento y alertas
o	Configuraci√≥n de formato markdown para mejor presentaci√≥n
4.2 Configuraci√≥n del Webhook para Respuestas
Para capturar las respuestas de aprobaci√≥n/rechazo:
1.	Crear HTTP Trigger en Power Automate
2.	Configurar procesamiento de JSON de respuesta
3.	Implementar l√≥gica de verificaci√≥n de usuario
4.	Establecer estructura de datos para almacenar respuesta
5. Pasos Detallados de Implementaci√≥n en Teams
5.1 Creaci√≥n y Configuraci√≥n de Canales (D√≠a 1)
1.	Crear el equipo "Aprobaciones CyC":
o	Administrador > Teams > + Crear equipo > Desde cero
o	Tipo de equipo: Privado
o	Nombre: "Aprobaciones CyC"
2.	Crear los canales requeridos:
o	Seleccionar "..." junto al nombre del equipo > Agregar canal
o	Crear cada uno de los canales especificados en la estructura
o	Establecer "Liberaciones-NV" como canal destacado
3.	Configurar permisos por canal:
o	Para cada canal: "..." > Administrar canal
o	Establecer moderaci√≥n donde sea necesario
o	Configurar permisos de publicaci√≥n
5.2 Instalaci√≥n de Power Automate App (D√≠a 1)
1.	Ir a la tienda de Teams
2.	Buscar e instalar "Power Automate"
3.	Configurar permisos necesarios
4.	Anclar la aplicaci√≥n para f√°cil acceso
5.3 Configuraci√≥n de Tarjetas Adaptativas (D√≠as 2-3)
1.	Preparar plantillas JSON:
o	Crear un archivo JSON para cada tipo de tarjeta
o	Definir variables sustituibles
o	Validar estructura con Adaptive Cards Designer
2.	Implementar en Power Automate:
o	Crear variables para almacenar plantillas
o	Configurar sustituci√≥n din√°mica de datos
o	Establecer l√≥gica de colores seg√∫n tiempo
3.	Probar visualizaci√≥n:
o	Enviar tarjetas de prueba a un canal de test
o	Verificar en diferentes dispositivos
o	Ajustar formato seg√∫n sea necesario
5.4 Pruebas de Interacci√≥n (D√≠a 4)
1.	Probar flujo completo:
o	Crear solicitud de prueba
o	Verificar notificaci√≥n en Teams
o	Probar botones de aprobaci√≥n/rechazo
o	Confirmar actualizaci√≥n en SharePoint
2.	Verificar gesti√≥n de tiempos:
o	Probar cambios de color seg√∫n tiempo transcurrido
o	Verificar alertas de SLA
o	Comprobar notificaciones escaladas
5.5 Configuraci√≥n para Usuarios (D√≠a 5)
1.	Agregar usuarios al equipo:
o	A√±adir propietarios (supervisores)
o	A√±adir miembros (analistas CyC)
o	Configurar permisos espec√≠ficos
2.	Configurar notificaciones personales:
o	Instrucciones para configurar alertas por canal
o	Configuraci√≥n de notificaciones m√≥viles
o	Ajustes de sonido y banner
6. Pruebas Espec√≠ficas de Teams
6.1 Escenarios de Prueba Cr√≠ticos
1.	Notificaciones simult√°neas:
o	Crear 10+ solicitudes en menos de 1 minuto
o	Verificar que todas las notificaciones lleguen correctamente
o	Comprobar que no haya duplicados
2.	Respuestas concurrentes:
o	Simular m√∫ltiples aprobadores intentando responder a la misma solicitud
o	Verificar manejo adecuado de condiciones de carrera
o	Confirmar que solo se registre una respuesta
3.	Rendimiento en diferentes dispositivos:
o	Probar en escritorio (Windows/Mac)
o	Probar en m√≥viles (iOS/Android)
o	Verificar visualizaci√≥n correcta de tarjetas
4.	Pruebas de resiliencia:
o	Simular ca√≠da de conexi√≥n durante respuesta
o	Verificar recuperaci√≥n de estado
o	Comprobar manejo de timeouts
6.2 Lista de Verificaci√≥n Final
‚Ä¢	[ ] Equipo creado con estructura correcta
‚Ä¢	[ ] Canales configurados con permisos adecuados
‚Ä¢	[ ] Tarjetas adaptativas renderizando correctamente
‚Ä¢	[ ] Botones de acci√≥n funcionando seg√∫n lo esperado
‚Ä¢	[ ] Notificaciones llegando oportunamente
‚Ä¢	[ ] Alertas de SLA activ√°ndose correctamente
‚Ä¢	[ ] Usuarios con acceso seg√∫n su rol
‚Ä¢	[ ] Documentaci√≥n de usuario preparada
7. Documentaci√≥n para Usuarios Finales
7.1 Gu√≠a para Analistas CyC
Contenido principal:
‚Ä¢	Acceso al equipo y canales
‚Ä¢	Interpretaci√≥n de tarjetas adaptativas
‚Ä¢	Proceso de aprobaci√≥n/rechazo
‚Ä¢	Configuraci√≥n de notificaciones recomendada
‚Ä¢	Gesti√≥n de alertas SLA
‚Ä¢	Procedimiento para casos especiales
7.2 Gu√≠a para Solicitantes
Contenido principal:
‚Ä¢	C√≥mo interpretar notificaciones de Teams
‚Ä¢	Seguimiento del estado de solicitudes
‚Ä¢	Respuesta a peticiones de informaci√≥n adicional
‚Ä¢	Procedimiento ante rechazos
8. Consideraciones de Soporte para Teams
8.1 Problemas Comunes y Soluciones
Problema	Soluci√≥n
No llegan notificaciones	Verificar configuraci√≥n personal de notificaciones
Tarjeta no muestra botones	Reinstalar aplicaci√≥n Teams / Limpiar cach√©
Error al aprobar/rechazar	Capturar c√≥digo de error y reintentar
Solicitud ya procesada	Verificar si otro aprobador ya respondi√≥
Teams no instalado en m√≥vil	Gu√≠a de instalaci√≥n y configuraci√≥n
8.2 Procedimiento de Escalamiento
1.	Nivel 1: Usuario avanzado en cada √°rea
2.	Nivel 2: Soporte t√©cnico de Teams
3.	Nivel 3: Administrador de Power Automate
8.3 Monitoreo de Teams
‚Ä¢	Verificaci√≥n diaria de conexi√≥n entre Power Automate y Teams
‚Ä¢	Comprobaci√≥n de tiempos de respuesta de notificaciones
‚Ä¢	Monitoreo de tasa de fallos en interacciones con tarjetas

